## Bezier曲线

### 公式

$$
B(t) = \sum_{i=0}^{n} B_{i,n}(t) \cdot P_i
$$

伯恩斯坦基函数
$$
B_{i,n}(t) = C(n, i) \cdot t^i \cdot (1-t)^{n-i}
$$

### 性质

># 凸包性
>
>定义：整条贝塞尔曲线都在控制点的凸包（连线）内
>
>原因：贝塞尔曲线本质是给每个控制点一个权重，权重和为1,保证了曲线始终在凸包内部
>
>作用：高效的碰撞检测，不用检测曲线而是检测凸包；保证数值的稳定，确保曲线不会飞到控制点外，行为可预测



># 仿射不变性
>
>仿射变换：平移，选转，错切，缩放的线性组合
>
>特征：保持平行和线性比例
>
>仿射不变性：先操作再仿射变换=先仿射变换再操作
>
>作用：先对控制点进行仿射变换再计算贝塞尔曲线，就能够通过改变控制点而得到不同的曲线，减少计算量



># 变差缩变性
>
>变差：方向变化的次数或曲线和直线的最大交点数
>
>变差缩变性：对于任意一条直线，和曲线的交点数总小于或等于该直线和控制点组成的多边形的交点数
>
>作用：这意味着曲线过滤掉了一些变化，能让曲线更平滑



### 极限



># 范围溢出
>
>当n过大时，可能超出整数类型的最大范围

># 缺乏局部控制
>
>改变一个点，则会影响整条曲线，全局影响

># 特殊曲线
>
>无法表示圆，椭圆，螺旋线，有尖点的曲线
>
>原因1：前三者的数学本质与贝塞尔不同，前者是sin/cos超越函数,后者是多项式，无法用多项式表达超越函数，只能无限逼近
>
>超越函数：有限的表达式无法完全表达的函数
>
>原因2：有尖点的曲线，尖点处一阶导为0,且曲率无限，而贝塞尔曲线的导数是存在且连续的

># 不稳定的波动
>
>龙格现象：当用高阶多项式去插值的时候，会在数据点产生剧烈的振荡
>
>原因：贝塞尔曲线中，每个控制点都有全局影响，这个n越大，全局影响的就越大，振荡越大

># 计算量
>
>高阶的计算量乘指数增长



###  适用

> 简单低次的曲线绘制,不适合复杂的，对精度，实时性要求高的曲线





---

## B样条



### 公式



#### 基础公式

$$
N_{i,0}(u) =
\begin{cases}
1 & \text{if } u_i \leq u < u_{i+1} \\
0 & \text{otherwise}
\end{cases}
$$

#### 递归公式

$$
N_{i,p}(u) = \frac{u - u_i}{u_{i+p} - u_i} N_{i,p-1}(u) + \frac{u_{i+p+1} - u}{u_{i+p+1} - u_{i+1}} N_{i+1,p-1}(u)
$$

#### 曲线公式

$$
\mathbf{C}(u) = \sum_{i=0}^{n} N_{i,p}(u) \, \mathbf{P}_i
$$

#### 节点数量

$$
m = n + p + 1
$$



### 性质

>#### 具有Bezier的所有性质
>
>

># 局部支撑性
>
>Ni,p只在[ui,ui+p+1]上非0,保证了每个控制点的基函数是局部影响

># 递归性
>
>每个基函数都由低一阶的相邻基函数线性组合，可以由统一的算法计算，具有高效性

># 几何不变性
>
>曲线的形状在仿射变换后不改变



###  极限

># 圆锥
>
>无法精确表示圆锥
>
>原因：圆锥是有理函数（多项式相除），B样条是多项式

># 最小粒度
>
>无法局部控制一个非常小的曲线段，B样条你影响一个点，会影响他的周围，由于他的范围是[ui,ui+p+1]，这意味着p(阶数>=1)时，最小范围长度是2,而当阶数增大，范围长度还会扩大，范围越大，影响周围就越大，就不能满足只影响那一个小段

># 穿过所有点
>
>这对B样条不现实，B样条不一定会穿过每个点，取决于基函数，如果硬要穿过，会得到一条很难看的曲线且计算量很大

># 撕裂感
>
>无法模拟B样条被撕裂的状态，因为改变了物体的基本连接关系（拓扑结构），而B样条的规则是固定好的
>
>解决方法：使用三角形片构建物体模型，只需要将三角形片分离
>
>

># 无法产生更丰富的细节
>
>B样条的规则是固定的，预设好的，如果需要丰富的细节需要人工干预
>
>例子:给B样条做的人脸模型加一个痘



###  适用

>CAD/CAM
>
>动画和运动平滑
>
>字体和矢量图形
>
>数据拟合：从数据中使用B样条提取一个整体的趋势
>
>3D模型软件中用于建造曲面模型



---

## NURBS
